<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Klantenbeheer - QPlanning</title>

  <!-- Bestaande globale styles -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../medewerkerbeheer.css" />

  <!-- Nieuwe pagina-specifieke CSS -->
  <link rel="stylesheet" href="./klant.css" />
</head>
<body>
<header class="header">
  <div class="header-container">
    <div class="header-left">
      <div class="logo">
        <h1>QPlanning</h1>
      </div>
      <nav class="main-nav">
        <ul class="nav-list">
          <li><a href="/index.html" class="nav-link active">Overzicht</a></li>
          <li class="dropdown">
            <a href="#" class="nav-link dropdown-toggle">Plannen</a>
            <ul class="dropdown-menu">
              <li><a href="/Boekingen/BoekingOverzicht.html" class="dropdown-link">Boekingen</a></li>
              <li><a href="#" class="dropdown-link">Klantenplanning</a></li>
              <li><a href="#" class="dropdown-link">Medewerkerplanning</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="nav-link dropdown-toggle">Beheer</a>
            <ul class="dropdown-menu">
              <li><a href="/klanten/klant.html" class="dropdown-link">Klanten beheren</a></li>
              <li><a href="/Medewerker/medewerkerbeheer.html" class="dropdown-link">Medewerkers beheren</a></li>
              <li><a href="/Gebruikers/Gebruikers.html" class="dropdown-link">Gebruikers beheren</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>

    <div class="header-right">
      <div class="account-dropdown">
        <button class="account-btn" id="accountBtn">
          <svg class="account-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </button>
        <ul class="account-menu" id="accountMenu">
          <li><a href="#" class="account-link">Wijzig wachtwoord</a></li>
          <li><a href="#" class="account-link">Log uit</a></li>
        </ul>
      </div>
    </div>
  </div>
</header>

<main class="main-content">
  <div class="content-container">
    <div class="page-header">
      <h2>Klantenbeheer</h2>
      <div class="page-header-actions">
        <button class="btn btn-secondary" id="add-boekjaar-btn">Nieuw boekjaar</button>
        <button class="btn btn-primary" id="add-klant-btn">Nieuwe klant toevoegen</button>
      </div>
    </div>

    <div class="filters-section">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Zoek klanten op naam, partner..." class="search-input">
        <button class="search-clear" id="clearSearch" title="Zoekopdracht wissen" style="display: none;">√ó</button>
      </div>
      <div class="filter-options">
        <select id="partnerFilter" class="filter-select">
          <option value="">Alle Partners</option>
        </select>
        <select id="teamFilter" class="filter-select">
          <option value="">Alle Teams</option>
        </select>
        <button class="btn btn-secondary" id="clearFilters">Filters wissen</button>
      </div>
    </div>

    <div class="bulk-actions-bar" id="bulkActionsBar" style="display: none;">
      <div class="bulk-info">
        <span id="selectedCount">0</span> klanten geselecteerd
      </div>
      <div class="bulk-buttons">
        <button class="btn btn-secondary" id="bulkDelete">Verwijderen</button>
      </div>
    </div>

    <div class="table-container">
      <table class="data-table">
        <thead>
        <tr>
          <th class="select-column"><input type="checkbox" id="selectAllCheckbox" class="select-checkbox"></th>
          <th>Klant naam</th>
          <th>Partner/Manager</th>
          <th>Budget</th>
          <th>Startdatum</th>
          <th>Einddatum</th>
          <th>Acties</th>
        </tr>
        </thead>
        <tbody id="klanten-tabel-body"></tbody>
      </table>
    </div>

    <div class="no-results" id="noResults" style="display: none;">
      <div class="no-results-icon">üîç</div>
      <h3>Geen klanten gevonden</h3>
      <p>Probeer andere zoektermen of filters.</p>
      <button class="btn btn-primary" id="clearAllFilters">Alle filters wissen</button>
    </div>
  </div>
</main>

<!-- KLANT MODAL -->
<div class="modal" id="klant-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modal-title">Nieuwe klant</h3>
      <button class="modal-close" id="closeModal">&times;</button>
    </div>
    <div class="form-info">
      <small>* Verplichte velden</small>
    </div>
    <form id="klant-form" class="modal-body" novalidate>
      <input type="hidden" id="klant-id">

      <div class="form-group">
        <label for="klant-naam">Klant naam *</label>
        <input type="text" id="klant-naam" name="klantNaam" placeholder="Bijv. Groot Bedrijf BV" required>
        <div class="error-message" id="klant-naamError"></div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="klant-boekjaar-select">Boekjaar *</label>
          <select id="klant-boekjaar-select" name="boekjaar" required>
            <option value="" disabled selected>Selecteer boekjaar...</option>
          </select>
          <div class="error-message" id="klantBoekjaarError"></div>
        </div>
        <div class="form-group">
          <label for="klant-budget">Budget (‚Ç¨) *</label>
          <input type="number" id="klant-budget" name="budget" placeholder="..." step="0.01" min="0" required>
          <div class="error-message" id="klant-budgetError"></div>
        </div>
      </div>

      <div class="form-group">
        <label for="klant-partner">Partner/Manager *</label>
        <select id="klant-partner" name="partnerManager" required>
          <option value="" disabled selected>Selecteer...</option>
          <option value="Jan Jansen">Jan Jansen</option>
          <option value="Marieke de Vries">Marieke de Vries</option>
          <option value="Pieter Smit">Pieter Smit</option>
        </select>
        <div class="error-message" id="klant-partnerError"></div>
      </div>

      <div class="form-group">
        <label for="klant-verantwoordelijk">Verantwoordelijk team *</label>
        <select id="klant-verantwoordelijk" name="verantwoordelijkTeam" required>
          <option value="" disabled selected>Selecteer...</option>
          <option value="Limburg">Limburg</option>
          <option value="Utrecht">Utrecht</option>
          <option value="Rotterdam">Rotterdam</option>
        </select>
        <div class="error-message" id="klant-verantwoordelijkError"></div>
      </div>

      <div class="form-group">
        <label for="klant-planbaar">Planbaar door teams *</label>
        <select id="klant-planbaar" name="planbaarDoorTeams" required>
          <option value="" disabled selected>Selecteer...</option>
          <option value="Limburg">Limburg</option>
          <option value="Utrecht">Utrecht</option>
          <option value="Rotterdam">Rotterdam</option>
        </select>
        <div class="error-message" id="klant-planbaarError"></div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="klant-startdatum">Startdatum *</label>
          <input type="date" id="klant-startdatum" name="startdatum" required>
          <div class="error-message" id="klant-startdatumError"></div>
        </div>
        <div class="form-group">
          <label for="klant-einddatum">Einddatum *</label>
          <input type="date" id="klant-einddatum" name="einddatum" required>
          <div class="error-message" id="klant-einddatumError"></div>
        </div>
      </div>
    </form>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelBtn">Annuleren</button>
      <button type="submit" class="btn btn-primary" form="klant-form" id="modal-save-btn">Opslaan</button>
    </div>
  </div>
</div>

<!-- NIEUW BOEKJAAR MODAL -->
<div class="modal" id="boekjaar-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Nieuw boekjaar</h3>
      <button class="modal-close" id="closeBoekjaarModal">&times;</button>
    </div>

    <div class="form-info">
      <small>* Verplichte velden</small>
    </div>

    <form id="boekjaar-form" class="modal-body" novalidate>
      <div class="form-group">
        <label for="boekjaar-jaar">Boekjaar *</label>
        <input type="text" id="boekjaar-jaar" name="jaar" maxlength="4" placeholder="2025" required>
        <div class="error-message" id="boekjaar-jaarError"></div>
      </div>

      <div class="form-group">
        <label for="boekjaar-budget">Budget (‚Ç¨) *</label>
        <input type="number" id="boekjaar-budget" name="budget" placeholder="Bijv. 10000" required step="0.01" min="0">
        <div class="error-message" id="boekjaar-budgetError"></div>
      </div>
    </form>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelBoekjaarBtn">Annuleren</button>
      <button type="submit" class="btn btn-primary" form="boekjaar-form" id="saveBoekjaarBtn">Opslaan</button>
    </div>
  </div>
</div>

<!-- ERROR MODAL -->
<div class="modal" id="errorModal" style="display:none;">
  <div class="modal-content error-modal-content">
    <div class="modal-header">
      <h3>Er zijn fouten gevonden</h3>
      <button class="modal-close" id="closeErrorModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="error-list" id="errorList"></div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-primary" id="closeErrorBtn">OK</button>
    </div>
  </div>
</div>

<!-- CONFIRM MODAL -->
<div class="modal" id="confirmModal">
  <div class="modal-content confirm-modal-content">
    <div class="modal-header">
      <h3 id="confirmTitle">Bevestiging vereist</h3>
      <button class="modal-close" id="closeConfirmModal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="confirm-icon" id="confirmIcon">‚ö†Ô∏è</div>
      <p id="confirmMessage">Weet je zeker dat je deze actie wilt uitvoeren?</p>
      <div class="confirm-details" id="confirmDetails" style="display: none;"></div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelConfirmBtn">Annuleren</button>
      <button type="button" class="btn btn-danger" id="confirmBtn">Bevestigen</button>
    </div>
  </div>
</div>

<!-- SUCCESS TOAST -->
<div class="success-notification" id="successNotification" style="display: none;">
  <div class="success-icon">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
      <path d="M9 12l2 2 4-4"></path><circle cx="12" cy="12" r="10"></circle>
    </svg>
  </div>
  <div class="success-message" id="successMessage">Actie succesvol uitgevoerd</div>
  <button class="success-close" id="closeSuccessNotification">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 6L6 18M6 6l12 12"></path>
    </svg>
  </button>
</div>

<!-- Nieuwe pagina-specifieke JS -->
<script src="./klant.js" defer></script>
</body>
</html>
