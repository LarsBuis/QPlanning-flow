<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gebruikersbeheer - QPlanning</title>
  <base href="/" />
  <!-- Globale styles -->
  <link rel="stylesheet" href="/styles.css">
  <!-- Pagina-specifieke styles (wijzigt niet in deze stap) -->
  <link rel="stylesheet" href="/Gebruikers/gebruikers.css">
</head>
<body>
<header class="header">
  <div class="header-container">
    <div class="header-left">
      <div class="logo"><h1>QPlanning</h1></div>
      <nav class="main-nav">
        <ul class="nav-list">
          <li><a href="/index.html" class="nav-link">Overzicht</a></li>
          <li class="dropdown">
            <a href="#" class="nav-link dropdown-toggle">Plannen</a>
            <ul class="dropdown-menu">
              <li><a href="/Boekingen/BoekingOverzicht.html" class="dropdown-link">Boekingen</a></li>
              <li><a href="#" class="dropdown-link">Klantenplanning</a></li>
              <li><a href="#" class="dropdown-link">Medewerkerplanning</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="nav-link dropdown-toggle">Beheer</a>
            <ul class="dropdown-menu">
              <li><a href="/klanten/klant.html" class="dropdown-link">Klanten beheren</a></li>
              <li><a href="/Medewerker/medewerkerbeheer.html" class="dropdown-link">Medewerkers beheren</a></li>
              <li><a href="/Gebruikers/Gebruikers.html" class="dropdown-link active">Gebruikers beheren</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
    <div class="header-right">
      <div class="account-dropdown">
        <button class="account-btn" id="accountBtn" aria-label="Account menu">
          <svg class="account-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </button>
        <ul class="account-menu" id="accountMenu">
          <li><a href="#" class="account-link">Wijzig wachtwoord</a></li>
          <li><a href="#" class="account-link">Log uit</a></li>
        </ul>
      </div>
    </div>
  </div>
</header>

<main class="main-content">
  <div class="content-container">
    <div class="page-header">
      <h2>Gebruikersbeheer</h2>
      <div class="page-header-actions">
        <button class="btn btn-primary" id="add-gebruiker-btn">Nieuwe gebruiker toevoegen</button>
      </div>
    </div>

    <div class="filters-section">
      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Zoek op naam, e-mail, gebruikersnaam..." class="search-input">
        <button class="search-clear" id="clearSearch" title="Zoekopdracht wissen" style="display:none;">×</button>
      </div>
      <div class="filter-options">
        <select id="rolFilter" class="filter-select">
          <option value="">Alle Rollen</option>
        </select>
        <button class="btn btn-secondary" id="clearFilters">Filters wissen</button>
      </div>
    </div>

    <div class="bulk-actions-bar" id="bulkActionsBar" style="display:none;">
      <div class="bulk-info"><span id="selectedCount">0</span> gebruikers geselecteerd</div>
      <div class="bulk-buttons">
        <button class="btn btn-secondary" id="bulkDelete">Verwijderen</button>
      </div>
    </div>

    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th class="select-column"><input type="checkbox" id="selectAllCheckbox" class="select-checkbox"></th>
            <th>Naam</th>
            <th>E-mail</th>
            <th>Gebruikersnaam</th>
            <th>Rol</th>
            <th>Acties</th>
          </tr>
        </thead>
        <tbody id="gebruikers-tabel-body"></tbody>
      </table>
    </div>

    <div class="no-results" id="noResults" style="display:none;">
      <div class="no-results-icon">🔍</div>
      <h3>Geen gebruikers gevonden</h3>
      <p>Probeer andere zoektermen of filters.</p>
      <button class="btn btn-primary" id="clearAllFilters">Alle filters wissen</button>
    </div>
  </div>
</main>

<!-- Gebruiker Modal -->
<div class="modal" id="gebruiker-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modal-title">Nieuwe gebruiker</h3>
      <button class="modal-close" id="closeModal" aria-label="Sluit modal">&times;</button>
    </div>
    <div class="form-info">
      <small><em>* Verplichte velden</em></small>
    </div>

    <form id="gebruiker-form" class="modal-body" novalidate>
      <input type="hidden" id="gebruiker-id">

      <!-- Naam: Voornaam → Tussenvoegsel → Achternaam -->
      <div class="form-row">
        <div class="form-group">
          <label for="voornaam">Voornaam *</label>
          <input type="text" id="voornaam" name="voornaam" required inputmode="text" pattern="[\p{L}]+" title="Alleen letters">
          <div class="error-message" id="voornaamError"></div>
        </div>
        <div class="form-group">
          <label for="tussenvoegsel">Tussenvoegsel</label>
          <input type="text" id="tussenvoegsel" name="tussenvoegsel" inputmode="text" pattern="[\p{L}\s]+" title="Alleen letters en spaties">
          <div class="error-message" id="tussenvoegselError"></div>
        </div>
        <div class="form-group">
          <label for="achternaam">Achternaam *</label>
          <input type="text" id="achternaam" name="achternaam" required inputmode="text" pattern="[\p{L}]+" title="Alleen letters">
          <div class="error-message" id="achternaamError"></div>
        </div>
      </div>

      <!-- E-mail (gebruikersnaam = e-mail) -->
      <div class="form-row">
        <div class="form-group" style="flex:1;">
          <label for="email">E-mail *</label>
          <input type="email" id="email" name="email" required>
          <div class="error-message" id="emailError"></div>
          <small class="field-hint" id="usernameHint">Gebruikersnaam is gelijk aan het e-mailadres en wordt automatisch ingesteld.</small>
        </div>
      </div>

      <!-- Rol -->
      <div class="form-group">
        <label for="rol">Rol *</label>
        <select id="rol" name="rol" required>
          <option value="" disabled selected>Selecteer...</option>
          <option value="Admin">Admin</option>
          <option value="Manager">Manager</option>
          <option value="Planner">Planner</option>
          <option value="Medewerker">Medewerker</option>
          <option value="Gast">Gast</option>
        </select>
        <div class="error-message" id="rolError"></div>
      </div>
    </form>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelBtn">Annuleren</button>
      <button type="submit" class="btn btn-primary" form="gebruiker-form" id="modal-save-btn">Toevoegen</button>
    </div>
  </div>
</div>

<!-- Confirm modal -->
<div class="modal" id="confirmModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="confirmTitle">Bevestiging vereist</h3>
      <button class="modal-close" id="closeConfirmModal">&times;</button>
    </div>
    <div class="modal-body">
      <p id="confirmMessage">Weet je zeker dat je deze actie wilt uitvoeren?</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelConfirmBtn">Annuleren</button>
      <button type="button" class="btn btn-danger" id="confirmBtn">Bevestigen</button>
    </div>
  </div>
</div>

<!-- Succesnotificatie -->
<div class="success-notification" id="successNotification" style="display:none;">
  <div class="success-icon">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
      <path d="M9 12l2 2 4-4"></path><circle cx="12" cy="12" r="10"></circle>
    </svg>
  </div>
  <div class="success-message" id="successMessage">Actie succesvol uitgevoerd</div>
  <button class="success-close" id="closeSuccessNotification">
    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 6L6 18M6 6l12 12"></path>
    </svg>
  </button>
</div>

<!-- Pagina-specifieke script -->
<script src="/Gebruikers/gebruikers.js" defer></script>
</body>
</html>
